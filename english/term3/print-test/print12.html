<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>è‹±å˜èªã‚¯ã‚¤ã‚º</title>
	<link rel="stylesheet" href="../../../style.css" />
	<style>
		body {
			margin: 60px auto 0 auto;
			display: flex;
			flex-direction: column;
			align-items: center;
		}

		@media (max-width: 768px) {
			body {
				padding: 20px;
			}
		}

		#word {
			font-size: 2em;
			margin: 30px 0 10px;
			color: #d35400;
			transition: color 0.3s ease;
		}

		.dark-mode #word {
			color: #ffa500;
		}

		#meaning {
			font-size: 1.8em;
			color: #333;
			margin: 20px 0;
			min-height: 2em;
			transition: color 0.3s ease;
		}

		.dark-mode #meaning {
			color: #e0e0e0;
		}

		button {
			font-size: 1.2em;
			padding: 12px 30px;
			margin-top: 20px;
			background-color: #fff3cd;
			color: #d35400;
			font-weight: bold;
			border: 2px solid #d35400;
			border-radius: 8px;
			cursor: pointer;
			transition: all 0.3s ease;
			font-family: 'MS Gothic', 'Menlo', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN', monospace;
		}

		.dark-mode button {
			background-color: #2d2d2d;
			color: #ffa500;
			border-color: #555555;
		}

		button:hover {
			transform: scale(1.05);
		}

		#answerBtn,
		#restartBtn {
			display: none;
		}

		#toggleModeBtn {
			position: fixed;
			top: 16px;
			left: 5%;
			background-color: #f0f0f0;
			color: #333333;
			border: 2px solid #cccccc;
			padding: 10px 16px;
			border-radius: 8px;
			cursor: pointer;
			font-weight: bold;
			transition: all 0.3s ease;
			z-index: 1000;
		}

		.dark-mode #toggleModeBtn {
			background-color: #333333;
			color: #e0e0e0;
			border-color: #555555;
		}
	</style>
</head>

<body>
	<h1>è‹±å˜èªprintâ‘«</h1>
	<div class="mode-info" id="modeDisplay"></div>

	<div class="word-display" id="word"></div>
	<div class="meaning-display" id="meaning"></div>

	<div class="controls">
		<button id="startBtn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
		<button id="answerBtn" style="display: none;">ç­”ãˆã‚’è¡¨ç¤º</button>
		<button id="restartBtn" style="display: none;">ã‚‚ã†ä¸€åº¦</button>
	</div>
	<button id="toggleModeBtn">ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ</button>
	<button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>

	<script>
		const wordList = `
eldarly,é«˜é½¢ã®
disability,éšœå®³
retirement,é€€è·
workforce,ç·åŠ´åƒäººå£
require,è¦æ±‚ã™ã‚‹
earn,ç¨¼ã
connect,ã¤ãªãŒã‚‹
encourage,å¥¨åŠ±ã™ã‚‹
document,æ›¸é¡
measure,æªç½®ãƒ»å¯¾ç­–
range,ç¯„å›²
`
			.split('\n')
			.filter(line => line.trim())
			.map(line => {
				const parts = line.split(',');
				if (parts.length >= 2) {
					return {
						word: parts[0].trim(),
						meaning: parts[1].trim()
					};
				}
				return null;
			})
			.filter(item => item !== null && item.word && item.meaning);

		// çŠ¶æ…‹ç®¡ç†
		const state = {
			shuffledList: [],
			currentIndex: 0,
			isAnswered: false,
			isQuizRunning: false,
			mode: 'en-to-ja' // 'en-to-ja' or 'ja-to-en'
		};

		// DOMè¦ç´ ã®å–å¾—
		const wordDiv = document.getElementById('word');
		const meaningDiv = document.getElementById('meaning');
		const startBtn = document.getElementById('startBtn');
		const answerBtn = document.getElementById('answerBtn');
		const restartBtn = document.getElementById('restartBtn');
		const toggleModeBtn = document.getElementById('toggleModeBtn');
		const modeDisplay = document.getElementById('modeDisplay');

		// åˆæœŸåŒ–é–¢æ•°
		function initializeQuiz() {
			answerBtn.style.display = 'none';
			restartBtn.style.display = 'none';
			wordDiv.textContent = 'å˜èªé›†';
			meaningDiv.textContent = 'ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦é–‹å§‹';
			updateModeDisplay();
		}

		// ãƒ¢ãƒ¼ãƒ‰è¡¨ç¤ºã®æ›´æ–°
		function updateModeDisplay() {
			if (state.mode === 'en-to-ja') {
				modeDisplay.textContent = 'ãƒ¢ãƒ¼ãƒ‰: è‹±â†’æ—¥';
				toggleModeBtn.textContent = 'æ—¥â†’è‹±ã«åˆ‡ã‚Šæ›¿ãˆ';
			} else {
				modeDisplay.textContent = 'ãƒ¢ãƒ¼ãƒ‰: æ—¥â†’è‹±';
				toggleModeBtn.textContent = 'è‹±â†’æ—¥ã«åˆ‡ã‚Šæ›¿ãˆ';
			}
		}

		// ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ
		function toggleMode() {
			state.mode = state.mode === 'en-to-ja' ? 'ja-to-en' : 'en-to-ja';
			updateModeDisplay();

			// ã‚¯ã‚¤ã‚ºå®Ÿè¡Œä¸­ãªã‚‰ç¾åœ¨ã®å•é¡Œã‚’ãƒ¢ãƒ¼ãƒ‰ã«åˆã‚ã›ã¦å†è¡¨ç¤º
			if (state.isQuizRunning && state.currentIndex < state.shuffledList.length) {
				showCurrentWord();
			}
		}

		// ç¾åœ¨ã®å˜èªã‚’è¡¨ç¤ºï¼ˆãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ã¦ï¼‰
		function showCurrentWord() {
			if (state.currentIndex < state.shuffledList.length) {
				const current = state.shuffledList[state.currentIndex];
				if (state.mode === 'en-to-ja') {
					wordDiv.textContent = current.word;
					meaningDiv.textContent = '';
				} else {
					wordDiv.textContent = current.meaning;
					meaningDiv.textContent = '';
				}
				state.isAnswered = false;
			}
		}

		// Fisher-Yatesã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
		function shuffle(array) {
			const shuffled = [...array];
			for (let i = shuffled.length - 1; i > 0; i--) {
				const j = Math.floor(Math.random() * (i + 1));
				[shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
			}
			return shuffled;
		}

		// æ¬¡ã®å˜èªã‚’è¡¨ç¤º
		function showNextWord() {
			if (state.currentIndex < state.shuffledList.length) {
				showCurrentWord();
			} else {
				endQuiz();
			}
		}

		// ã‚¯ã‚¤ã‚ºçµ‚äº†å‡¦ç†
		function endQuiz() {
			wordDiv.textContent = 'çµ‚äº†ï¼';
			meaningDiv.textContent = `å…¨${state.shuffledList.length}å•`;
			answerBtn.style.display = 'none';
			restartBtn.style.display = 'inline-block';
			state.isQuizRunning = false;
		}

		// ã‚¯ã‚¤ã‚ºé–‹å§‹
		function startQuiz() {
			if (wordList.length === 0) {
				wordDiv.textContent = 'å˜èªãƒªã‚¹ãƒˆãŒç©ºã§ã™';
				meaningDiv.textContent = '';
				return;
			}

			state.shuffledList = shuffle([...wordList]);
			state.currentIndex = 0;
			state.isAnswered = false;
			state.isQuizRunning = true;

			startBtn.style.display = 'none';
			answerBtn.style.display = 'inline-block';
			restartBtn.style.display = 'none';

			showNextWord();
		}

		// ç­”ãˆã‚’è¡¨ç¤º
		function showAnswer() {
			if (!state.isQuizRunning || state.isAnswered) return;

			const current = state.shuffledList[state.currentIndex];

			// ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ã¦ç­”ãˆã‚’è¡¨ç¤º
			if (state.mode === 'en-to-ja') {
				meaningDiv.textContent = current.meaning;
			} else {
				meaningDiv.textContent = current.word;
			}

			state.isAnswered = true;
			state.currentIndex++;

			setTimeout(showNextWord, 1500);
		}

		// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
		function setupEventListeners() {
			startBtn.addEventListener('click', startQuiz);
			answerBtn.addEventListener('click', showAnswer);
			restartBtn.addEventListener('click', startQuiz);
			toggleModeBtn.addEventListener('click', toggleMode);
		}

		// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
		document.addEventListener('DOMContentLoaded', function () {
			initializeQuiz();
			setupEventListeners();
		});
	</script>
	<script src="../../../script.js"></script>
</body>

</html>